(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[455],{1257:function(e,s,t){Promise.resolve().then(t.bind(t,4830)),Promise.resolve().then(t.bind(t,9896)),Promise.resolve().then(t.bind(t,598))},4830:function(e,s,t){"use strict";t.d(s,{default:function(){return d}});var l=t(7437),a=t(7648),r=t(9376),n=t(695);function i(){let e=(0,r.useRouter)(),s=(0,n.createBrowserClient)("https://ckubfbjfjbhuotyfwmac.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNrdWJmYmpmamJodW90eWZ3bWFjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg5ODY1NzgsImV4cCI6MjA3NDU2MjU3OH0._Stz6_nHRQMqs2N1HdJ9Y7gEjL60s2ua9d5YcMn1H3Y"),t=async()=>{await s.auth.signOut(),e.push("/login"),e.refresh()};return(0,l.jsx)("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-red-600 bg-red-50 hover:bg-red-100 rounded-lg transition border border-red-100",children:"Sign Out"})}function d(e){let{employeeName:s,role:t,location:n,showBack:d=!1}=e,o=(0,r.useRouter)();return(0,l.jsxs)("nav",{className:"bg-white border-b border-slate-200 px-6 py-4 flex justify-between items-center shadow-sm",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)(a.default,{href:"/dashboard",className:"cursor-pointer hover:opacity-80 transition",children:(0,l.jsx)("div",{className:"h-10 w-10 bg-blue-900 rounded-full flex items-center justify-center text-white font-bold",children:"PT"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-lg font-bold text-slate-800",children:"Piyam Travels Portal"}),(0,l.jsxs)("p",{className:"text-xs text-slate-500",children:[null==n?void 0:n.name," (",null==n?void 0:n.branch_code,")"]})]}),d&&(0,l.jsx)("button",{onClick:()=>o.back(),className:"ml-4 text-sm text-blue-600 hover:text-blue-800 font-medium flex items-center gap-1",children:"← Back"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-6",children:[(0,l.jsxs)("div",{className:"text-right hidden sm:block",children:[(0,l.jsx)("p",{className:"text-sm font-medium text-slate-900",children:s}),(0,l.jsx)("p",{className:"text-xs text-blue-600 font-semibold",children:t})]}),(0,l.jsx)(i,{})]})]})}},9896:function(e,s,t){"use strict";t.d(s,{default:function(){return d}});var l=t(7437),a=t(2265),r=t(9376),n=t(695);function i(e){let{showWarning:s,secondsRemaining:t}=e,[r,n]=(0,a.useState)(!1);if((0,a.useEffect)(()=>{n(!0)},[]),!r||!s)return null;let i=t/30*100;return(0,l.jsx)("div",{className:"fixed top-16 left-0 right-0 z-40 pointer-events-none flex justify-center px-4 py-4",children:(0,l.jsxs)("div",{className:"relative bg-white border-2 border-red-300 rounded-lg shadow-lg max-w-md w-full pointer-events-auto",children:[(0,l.jsx)("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gray-200 rounded-t-md overflow-hidden",children:(0,l.jsx)("div",{className:"h-full bg-red-500 transition-all duration-1000 ease-linear",style:{width:"".concat(i,"%")}})}),(0,l.jsx)("div",{className:"p-4 pt-5",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("div",{className:"flex-shrink-0",children:(0,l.jsx)("svg",{className:"w-6 h-6 text-red-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 102 0V6z",clipRule:"evenodd"})})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm font-semibold text-slate-900",children:"Session ending soon"}),(0,l.jsx)("p",{className:"text-xs text-slate-600",children:"Move your mouse or press a key to stay logged in"})]})]}),(0,l.jsxs)("div",{className:"text-3xl font-bold text-red-600 tabular-nums min-w-12 text-right",children:[t,"s"]})]})})]})})}function d(e){let{children:s}=e,[t,d]=(0,a.useState)(!1),[o,c]=(0,a.useState)(0);return!function(e){let s=(0,r.useRouter)(),t=(0,n.createBrowserClient)("https://ckubfbjfjbhuotyfwmac.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNrdWJmYmpmamJodW90eWZ3bWFjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg5ODY1NzgsImV4cCI6MjA3NDU2MjU3OH0._Stz6_nHRQMqs2N1HdJ9Y7gEjL60s2ua9d5YcMn1H3Y"),[l,i]=(0,a.useState)(!1),[d,o]=(0,a.useState)(0),c=(0,a.useCallback)(async()=>{await t.auth.signOut(),s.push("/login")},[t,s]);(0,a.useEffect)(()=>{let s=null,t=null,a=null,r=()=>{s&&clearTimeout(s),t&&clearTimeout(t),a&&clearInterval(a),i(!1),o(0),null==e||e(!1,0),t=setTimeout(()=>{i(!0),null==e||e(!0,30),o(30);let s=30;a=setInterval(()=>{o(s-=1),null==e||e(!0,s),s<=0&&a&&clearInterval(a)},1e3)},27e4),s=setTimeout(c,3e5)},n=["mousedown","keydown","scroll","touchstart","click"],d=()=>{l||r()};return n.forEach(e=>{window.addEventListener(e,d)}),r(),()=>{s&&clearTimeout(s),t&&clearTimeout(t),a&&clearInterval(a),n.forEach(e=>{window.removeEventListener(e,d)})}},[s,t,c,l,e])}((e,s)=>{d(e),c(s||0)}),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i,{showWarning:t,secondsRemaining:o}),s]})}},598:function(e,s,t){"use strict";t.d(s,{default:function(){return i}});var l=t(7437),a=t(2265),r=t(695),n=t(9376);function i(e){let{initialLocations:s,initialDepts:t,initialRoles:i,initialEmployees:d}=e,[o,c]=(0,a.useState)("branches"),[m,u]=(0,a.useState)(s),[x,h]=(0,a.useState)(d),[p,b]=(0,a.useState)(""),[f,g]=(0,a.useState)(""),[j,N]=(0,a.useState)(null),[v,y]=(0,a.useState)(!1),[w,_]=(0,a.useState)(null),[C,I]=(0,a.useState)(null),[S,k]=(0,a.useState)({firstName:"",lastName:"",email:"",role_id:"",department_ids:[],location_id:""}),[J,E]=(0,a.useState)(!1),O=(0,r.createBrowserClient)("https://ckubfbjfjbhuotyfwmac.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNrdWJmYmpmamJodW90eWZ3bWFjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg5ODY1NzgsImV4cCI6MjA3NDU2MjU3OH0._Stz6_nHRQMqs2N1HdJ9Y7gEjL60s2ua9d5YcMn1H3Y"),M=(0,n.useRouter)(),Y=async e=>{e.preventDefault(),E(!0);let{data:s,error:t}=await O.from("locations").insert({name:p,branch_code:f,type:"Branch"}).select();!t&&s?(u([...m,s[0]]),b(""),g("")):alert("Error: "+(null==t?void 0:t.message)),E(!1)},z=async()=>{if(!j)return;E(!0);let{error:e}=await O.from("locations").update({name:j.name,branch_code:j.branch_code}).eq("id",j.id);e?alert("Error updating branch: "+e.message):(u(m.map(e=>e.id===j.id?j:e)),N(null),M.refresh()),E(!1)},R=e=>{k(s=>{let t=s.department_ids.includes(e);return{...s,department_ids:t?s.department_ids.filter(s=>s!==e):[...s.department_ids,e]}})},T=async e=>{e.preventDefault(),E(!0);try{let e=await fetch("/api/admin/add-employee",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(S)}),s=await e.json();e.ok?(alert("Success! User created."),y(!1),k({firstName:"",lastName:"",email:"",role_id:"",department_ids:[],location_id:""}),M.refresh()):alert("Error: "+(s.error||"Unknown error"))}catch(e){alert("Network Error")}E(!1)},B=async e=>{let{employee_id:s,email:t}=e,l=await fetch("/api/admin/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s?{employee_id:s}:{email:t})}),a=await l.json();if(!l.ok)throw Error(a.error||"Failed to reset password");return a},F=async()=>{if(!w)return;E(!0);let{error:e}=await O.from("employees").update({role_id:w.role_id,department_id:w.department_id,location_id:w.location_id,manager_id:w.manager_id}).eq("id",w.id);e?alert("Failed to update: "+e.message):(h(x.map(e=>e.id===w.id?w:e)),_(null),M.refresh()),E(!1)},H=async(e,s)=>{let{error:t}=await O.from("employees").update({manager_id:"null"===s?null:s}).eq("id",e);t?alert("Error moving employee: "+t.message):(h(x.map(t=>t.id===e?{...t,manager_id:"null"===s?null:s}:t)),M.refresh())},A=e=>{var t,a;let{employee:r,level:n}=e,d=x.filter(e=>e.manager_id===r.id);return(0,l.jsxs)("div",{className:"mb-2 relative",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-lg border border-slate-200 bg-white shadow-sm hover:border-blue-300 transition-colors ml-".concat(6*n),style:{marginLeft:"".concat(2*n,"rem")},children:[n>0&&(0,l.jsx)("div",{className:"absolute -left-4 top-1/2 w-4 h-px bg-slate-300"}),(0,l.jsx)("div",{className:"h-8 w-8 rounded-full flex items-center justify-center text-xs font-bold text-white\n            ".concat(0===n?"bg-purple-600":1===n?"bg-blue-600":"bg-slate-500"),children:r.full_name.charAt(0)}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("p",{className:"text-sm font-bold text-slate-800",children:r.full_name}),(0,l.jsxs)("p",{className:"text-xs text-slate-500",children:[null===(t=i.find(e=>e.id===r.role_id))||void 0===t?void 0:t.name," • ",(null===(a=s.find(e=>e.id===r.location_id))||void 0===a?void 0:a.name)||"No Branch"]})]}),(0,l.jsxs)("select",{className:"text-xs border rounded p-1 bg-slate-50 text-slate-600 focus:ring-2 focus:ring-blue-500 outline-none w-40",value:r.manager_id||"null",onChange:e=>H(r.id,e.target.value),children:[(0,l.jsx)("option",{value:"null",children:"No Manager (Root)"}),x.filter(e=>e.id!==r.id).map(e=>(0,l.jsxs)("option",{value:e.id,children:["Report to: ",e.full_name]},e.id))]})]}),(0,l.jsx)("div",{className:"border-l-2 border-slate-100 ml-4",children:d.map(e=>(0,l.jsx)(A,{employee:e,level:n+1},e.id))})]})},U=(0,a.useMemo)(()=>x.filter(e=>!e.manager_id),[x]);return(0,l.jsxs)("div",{className:"flex flex-col md:flex-row gap-8 min-h-screen",children:[(0,l.jsx)("div",{className:"w-full md:w-64 flex-shrink-0",children:(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow border border-slate-200 overflow-hidden sticky top-24",children:[(0,l.jsx)("button",{onClick:()=>c("branches"),className:"w-full text-left px-4 py-3 border-l-4 transition-colors ".concat("branches"===o?"border-blue-900 bg-blue-50 font-medium text-blue-900":"border-transparent hover:bg-slate-50 text-slate-600"),children:"Branches & Locations"}),(0,l.jsx)("button",{onClick:()=>c("staff"),className:"w-full text-left px-4 py-3 border-l-4 transition-colors ".concat("staff"===o?"border-blue-900 bg-blue-50 font-medium text-blue-900":"border-transparent hover:bg-slate-50 text-slate-600"),children:"Staff Management"}),(0,l.jsx)("button",{onClick:()=>c("hierarchy"),className:"w-full text-left px-4 py-3 border-l-4 transition-colors ".concat("hierarchy"===o?"border-blue-900 bg-blue-50 font-medium text-blue-900":"border-transparent hover:bg-slate-50 text-slate-600"),children:"Hierarchy Tree"})]})}),(0,l.jsxs)("div",{className:"flex-1 space-y-6",children:["branches"===o&&(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-slate-200",children:[(0,l.jsx)("h3",{className:"font-bold text-lg mb-4 text-slate-800",children:"Add New Location"}),(0,l.jsxs)("form",{onSubmit:Y,className:"flex gap-4 items-end",children:[(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("label",{className:"block text-xs font-semibold text-slate-500 uppercase mb-1",children:"Branch Name"}),(0,l.jsx)("input",{type:"text",placeholder:"e.g. Manchester Office",required:!0,className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none",value:p,onChange:e=>b(e.target.value)})]}),(0,l.jsxs)("div",{className:"w-32",children:[(0,l.jsx)("label",{className:"block text-xs font-semibold text-slate-500 uppercase mb-1",children:"Code"}),(0,l.jsx)("input",{type:"text",placeholder:"MAN-01",required:!0,className:"w-full p-2 border rounded uppercase focus:ring-2 focus:ring-blue-500 outline-none",value:f,onChange:e=>g(e.target.value.toUpperCase())})]}),(0,l.jsx)("button",{disabled:J,className:"bg-blue-900 text-white px-6 py-2 rounded hover:bg-blue-800 font-medium transition-colors",children:J?"Adding...":"Add Branch"})]})]}),(0,l.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden",children:(0,l.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,l.jsx)("thead",{className:"bg-slate-50 text-slate-500 font-semibold border-b",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"px-6 py-3",children:"Location Name"}),(0,l.jsx)("th",{className:"px-6 py-3",children:"Branch Code"}),(0,l.jsx)("th",{className:"px-6 py-3",children:"Type"}),(0,l.jsx)("th",{className:"px-6 py-3",children:"Action"})]})}),(0,l.jsx)("tbody",{className:"divide-y divide-slate-100",children:m.map(e=>(0,l.jsx)("tr",{className:"hover:bg-slate-50",children:(null==j?void 0:j.id)===e.id?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("td",{className:"px-6 py-3",children:(0,l.jsx)("input",{className:"border p-1 rounded w-full",value:j.name,onChange:e=>N({...j,name:e.target.value})})}),(0,l.jsx)("td",{className:"px-6 py-3",children:(0,l.jsx)("input",{className:"border p-1 rounded w-24 uppercase",value:j.branch_code,onChange:e=>N({...j,branch_code:e.target.value.toUpperCase()})})}),(0,l.jsx)("td",{className:"px-6 py-3 text-slate-400",children:e.type}),(0,l.jsxs)("td",{className:"px-6 py-3 flex gap-3",children:[(0,l.jsx)("button",{onClick:z,className:"text-green-600 font-bold hover:underline",children:"Save"}),(0,l.jsx)("button",{onClick:()=>N(null),className:"text-slate-400 hover:underline",children:"Cancel"})]})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("td",{className:"px-6 py-3 font-medium text-slate-900",children:e.name}),(0,l.jsx)("td",{className:"px-6 py-3 font-mono text-slate-500",children:e.branch_code||"-"}),(0,l.jsx)("td",{className:"px-6 py-3",children:(0,l.jsx)("span",{className:"px-2 py-1 rounded text-xs ".concat("HQ"===e.type?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"),children:e.type})}),(0,l.jsx)("td",{className:"px-6 py-3",children:(0,l.jsx)("button",{onClick:()=>N(e),className:"text-blue-600 hover:text-blue-800 font-medium",children:"Edit"})})]})},e.id))})]})})]}),"staff"===o&&(0,l.jsx)("div",{className:"space-y-6",children:(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden",children:[(0,l.jsxs)("div",{className:"p-4 border-b border-slate-200 bg-slate-50 flex justify-between items-center",children:[(0,l.jsx)("h3",{className:"font-bold text-slate-700",children:"Staff Directory"}),(0,l.jsx)("button",{onClick:()=>y(!v),className:"text-sm bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition font-medium",children:v?"Cancel":"+ Invite New Employee"})]}),v&&(0,l.jsxs)("div",{className:"p-6 bg-blue-50 border-b border-blue-100 animate-fade-in",children:[(0,l.jsx)("h4",{className:"font-bold text-blue-900 mb-4",children:"New Employee Details"}),(0,l.jsxs)("form",{onSubmit:T,className:"space-y-4",children:[(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsx)("input",{placeholder:"First Name",required:!0,className:"p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none",value:S.firstName,onChange:e=>k({...S,firstName:e.target.value})}),(0,l.jsx)("input",{placeholder:"Last Name",required:!0,className:"p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none",value:S.lastName,onChange:e=>k({...S,lastName:e.target.value})})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsx)("input",{type:"email",placeholder:"Email Address",required:!0,className:"p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none",value:S.email,onChange:e=>k({...S,email:e.target.value})}),(0,l.jsxs)("select",{required:!0,className:"p-2 border rounded bg-white focus:ring-2 focus:ring-blue-500 outline-none",value:S.role_id,onChange:e=>k({...S,role_id:e.target.value}),children:[(0,l.jsx)("option",{value:"",children:"Select Role"}),i.map(e=>(0,l.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,l.jsxs)("div",{className:"bg-white p-4 border rounded-lg",children:[(0,l.jsx)("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-3",children:"Assign Departments"}),(0,l.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:t.map(e=>(0,l.jsxs)("label",{className:"flex items-center gap-2 text-sm cursor-pointer p-2 hover:bg-slate-50 rounded border border-transparent hover:border-slate-200 transition",children:[(0,l.jsx)("input",{type:"checkbox",value:e.id,checked:S.department_ids.includes(e.id),onChange:()=>R(e.id),className:"rounded border-slate-300 text-blue-900 focus:ring-blue-900 w-4 h-4"}),e.name]},e.id))})]}),(0,l.jsxs)("select",{className:"w-full p-2 border rounded bg-white focus:ring-2 focus:ring-blue-500 outline-none",value:S.location_id,onChange:e=>k({...S,location_id:e.target.value}),children:[(0,l.jsx)("option",{value:"",children:"Select Branch (Optional)"}),m.map(e=>(0,l.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,l.jsx)("button",{disabled:J,className:"w-full bg-blue-900 text-white py-3 rounded hover:bg-blue-800 font-bold transition-colors",children:J?"Creating Account & Sending Email...":"Create Account"})]})]}),(0,l.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,l.jsx)("thead",{className:"bg-slate-50 text-slate-500 font-semibold border-b",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"px-4 py-3",children:"Name"}),(0,l.jsx)("th",{className:"px-4 py-3",children:"Role"}),(0,l.jsx)("th",{className:"px-4 py-3",children:"Branch"}),(0,l.jsx)("th",{className:"px-4 py-3",children:"Department"}),(0,l.jsx)("th",{className:"px-4 py-3",children:"Action"})]})}),(0,l.jsx)("tbody",{className:"divide-y divide-slate-100",children:x.map(e=>{var s,a,r;return(0,l.jsxs)("tr",{className:"hover:bg-slate-50",children:[(0,l.jsxs)("td",{className:"px-4 py-3 font-medium",children:[e.full_name,(0,l.jsx)("div",{className:"text-xs text-slate-400 font-normal",children:e.email})]}),(null==w?void 0:w.id)===e.id?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("td",{className:"px-2 py-3",children:(0,l.jsxs)("select",{className:"border rounded p-1 w-full",value:w.role_id||"",onChange:e=>_({...w,role_id:e.target.value}),children:[(0,l.jsx)("option",{value:"",children:"- Role -"}),i.map(e=>(0,l.jsx)("option",{value:e.id,children:e.name},e.id))]})}),(0,l.jsx)("td",{className:"px-2 py-3",children:(0,l.jsxs)("select",{className:"border rounded p-1 w-full",value:w.location_id||"",onChange:e=>_({...w,location_id:e.target.value}),children:[(0,l.jsx)("option",{value:"",children:"- Branch -"}),m.map(e=>(0,l.jsx)("option",{value:e.id,children:e.name},e.id))]})}),(0,l.jsx)("td",{className:"px-2 py-3",children:(0,l.jsx)("span",{className:"text-xs text-gray-400 italic",children:"Manage via Profile"})}),(0,l.jsxs)("td",{className:"px-4 py-3 flex gap-2",children:[(0,l.jsx)("button",{onClick:F,className:"text-green-600 font-bold hover:underline",children:"Save"}),(0,l.jsx)("button",{onClick:()=>_(null),className:"text-slate-400 hover:underline",children:"Cancel"})]})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("td",{className:"px-4 py-3",children:(null===(s=i.find(s=>s.id===e.role_id))||void 0===s?void 0:s.name)||"-"}),(0,l.jsx)("td",{className:"px-4 py-3",children:(null===(a=m.find(s=>s.id===e.location_id))||void 0===a?void 0:a.name)||"-"}),(0,l.jsx)("td",{className:"px-4 py-3",children:(null===(r=t.find(s=>s.id===e.department_id))||void 0===r?void 0:r.name)||"-"}),(0,l.jsxs)("td",{className:"px-4 py-3",children:[(0,l.jsx)("button",{onClick:()=>_(e),className:"text-blue-600 hover:text-blue-800 font-medium",children:"Edit"}),(0,l.jsx)("button",{onClick:async()=>{if(confirm("Send a temporary password to ".concat(e.email,"?")))try{I(e.id);let s=await B({employee_id:e.id});alert(s.message||"Temporary password emailed")}catch(e){alert("Error: "+(e.message||e))}finally{I(null)}},disabled:J||C===e.id,className:"ml-3 text-red-600 hover:underline",children:C===e.id?"Sending...":"Reset Password"})]})]})]},e.id)})})]})]})}),"hierarchy"===o&&(0,l.jsx)("div",{className:"space-y-6",children:(0,l.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-slate-200",children:[(0,l.jsx)("h3",{className:"font-bold text-lg mb-2 text-slate-800",children:"Organization Hierarchy"}),(0,l.jsx)("p",{className:"text-sm text-slate-500 mb-6",children:"Visualise reporting lines. Use the dropdown on any employee card to change their manager."}),(0,l.jsxs)("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-200 min-h-[400px]",children:[0===U.length&&(0,l.jsx)("p",{className:"text-center text-gray-400 py-10",children:"No employees found."}),U.map(e=>(0,l.jsx)(A,{employee:e,level:0},e.id))]})]})})]})]})}}},function(e){e.O(0,[340,648,971,117,744],function(){return e(e.s=1257)}),_N_E=e.O()}]);