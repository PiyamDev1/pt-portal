(()=>{var e={};e.id=702,e.ids=[702],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5689:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>c,routeModule:()=>h,tree:()=>d}),t(4253),t(1506),t(5866);var r=t(3191),a=t(8716),l=t(7922),i=t.n(l),n=t(5231),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);t.d(s,o);let d=["",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,4253)),"/workspaces/pt-portal/app/dashboard/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,1506)),"/workspaces/pt-portal/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/workspaces/pt-portal/app/dashboard/page.tsx"],m="/dashboard/page",u={require:t,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},3028:(e,s,t)=>{Promise.resolve().then(t.bind(t,3784)),Promise.resolve().then(t.bind(t,4284)),Promise.resolve().then(t.t.bind(t,9404,23))},2107:()=>{},3164:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,2994,23)),Promise.resolve().then(t.t.bind(t,6114,23)),Promise.resolve().then(t.t.bind(t,9727,23)),Promise.resolve().then(t.t.bind(t,9671,23)),Promise.resolve().then(t.t.bind(t,1868,23)),Promise.resolve().then(t.t.bind(t,4759,23))},3784:(e,s,t)=>{"use strict";t.d(s,{default:()=>o});var r=t(326),a=t(434),l=t(5047),i=t(6795);function n(){let e=(0,l.useRouter)(),s=(0,i.createBrowserClient)("https://ckubfbjfjbhuotyfwmac.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNrdWJmYmpmamJodW90eWZ3bWFjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg5ODY1NzgsImV4cCI6MjA3NDU2MjU3OH0._Stz6_nHRQMqs2N1HdJ9Y7gEjL60s2ua9d5YcMn1H3Y"),t=async()=>{await s.auth.signOut(),e.push("/login"),e.refresh()};return r.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-red-600 bg-red-50 hover:bg-red-100 rounded-lg transition border border-red-100",children:"Sign Out"})}function o({employeeName:e,role:s,location:t,showBack:i=!1}){let o=(0,l.useRouter)();return(0,r.jsxs)("nav",{className:"bg-white border-b border-slate-200 px-6 py-4 flex justify-between items-center shadow-sm",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[r.jsx(a.default,{href:"/dashboard",className:"cursor-pointer hover:opacity-80 transition",children:r.jsx("div",{className:"h-10 w-10 bg-blue-900 rounded-full flex items-center justify-center text-white font-bold",children:"PT"})}),(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-lg font-bold text-slate-800",children:"Piyam Travels Portal"}),(0,r.jsxs)("p",{className:"text-xs text-slate-500",children:[t?.name," (",t?.branch_code,")"]})]}),i&&r.jsx("button",{onClick:()=>o.back(),className:"ml-4 text-sm text-blue-600 hover:text-blue-800 font-medium flex items-center gap-1",children:"← Back"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-6",children:[(0,r.jsxs)("div",{className:"text-right hidden sm:block",children:[r.jsx("p",{className:"text-sm font-medium text-slate-900",children:e}),r.jsx("p",{className:"text-xs text-blue-600 font-semibold",children:s})]}),r.jsx(n,{})]})]})}},4284:(e,s,t)=>{"use strict";t.d(s,{default:()=>o});var r=t(326),a=t(7577),l=t(5047),i=t(6795);function n({showWarning:e,secondsRemaining:s}){let[t,l]=(0,a.useState)(!1);if(!t||!e)return null;let i=s/30*100;return r.jsx("div",{className:"fixed top-16 left-0 right-0 z-40 pointer-events-none flex justify-center px-4 py-4",children:(0,r.jsxs)("div",{className:"relative bg-white border-2 border-red-300 rounded-lg shadow-lg max-w-md w-full pointer-events-auto",children:[r.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gray-200 rounded-t-md overflow-hidden",children:r.jsx("div",{className:"h-full bg-red-500 transition-all duration-1000 ease-linear",style:{width:`${i}%`}})}),r.jsx("div",{className:"p-4 pt-5",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 102 0V6z",clipRule:"evenodd"})})}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-semibold text-slate-900",children:"Session ending soon"}),r.jsx("p",{className:"text-xs text-slate-600",children:"Move your mouse or press a key to stay logged in"})]})]}),(0,r.jsxs)("div",{className:"text-3xl font-bold text-red-600 tabular-nums min-w-12 text-right",children:[s,"s"]})]})})]})})}function o({children:e}){let[s,t]=(0,a.useState)(!1),[o,d]=(0,a.useState)(0);return function(e){let s=(0,l.useRouter)(),t=(0,i.createBrowserClient)("https://ckubfbjfjbhuotyfwmac.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNrdWJmYmpmamJodW90eWZ3bWFjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg5ODY1NzgsImV4cCI6MjA3NDU2MjU3OH0._Stz6_nHRQMqs2N1HdJ9Y7gEjL60s2ua9d5YcMn1H3Y"),[r,n]=(0,a.useState)(!1),[o,d]=(0,a.useState)(0);(0,a.useCallback)(async()=>{await t.auth.signOut(),s.push("/login")},[t,s])}((e,s)=>{t(e),d(s||0)}),(0,r.jsxs)(r.Fragment,{children:[r.jsx(n,{showWarning:s,secondsRemaining:o}),e]})}},6494:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(8570).createProxy)(String.raw`/workspaces/pt-portal/app/components/PageHeader.client.tsx#default`)},7673:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(8570).createProxy)(String.raw`/workspaces/pt-portal/app/dashboard/client-wrapper.tsx#default`)},4253:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>m});var r=t(9510),a=t(8231),l=t(1615),i=t(8585),n=t(1812),o=t.n(n),d=t(6494),c=t(7673);async function m(){let e=await (0,l.cookies)(),s=(0,a.createServerClient)("https://ckubfbjfjbhuotyfwmac.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNrdWJmYmpmamJodW90eWZ3bWFjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg5ODY1NzgsImV4cCI6MjA3NDU2MjU3OH0._Stz6_nHRQMqs2N1HdJ9Y7gEjL60s2ua9d5YcMn1H3Y",{cookies:{getAll:()=>e.getAll(),setAll(s){try{s.forEach(({name:s,value:t,options:r})=>e.set(s,t,r))}catch{}}}}),{data:{session:t}}=await s.auth.getSession();t||(0,i.redirect)("/login");let{data:n}=await s.from("employees").select("full_name, roles(name), locations(name, branch_code)").eq("id",t.user.id).single(),m=Array.isArray(n?.locations)?n.locations[0]:n?.locations,u=Array.isArray(n?.roles)?n.roles[0]:n?.roles,h=u?.name==="Master Admin";return r.jsx(c.Z,{children:(0,r.jsxs)("div",{className:"min-h-screen bg-slate-50",children:[r.jsx(d.Z,{employeeName:n?.full_name,role:u?.name,location:m}),(0,r.jsxs)("main",{className:"p-8 max-w-7xl mx-auto space-y-8",children:[(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-8",children:[(0,r.jsxs)("h2",{className:"text-2xl font-light text-slate-800 mb-2",children:["Welcome back, ",n?.full_name]}),r.jsx("p",{className:"text-slate-500",children:"Select a module below to begin working."})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{className:"bg-white p-6 rounded-xl border border-slate-200 hover:border-blue-400 hover:shadow-md transition cursor-pointer group",children:[r.jsx("div",{className:"h-12 w-12 bg-blue-50 rounded-lg flex items-center justify-center mb-4 group-hover:bg-blue-100",children:r.jsx("span",{className:"text-2xl",children:"✈️"})}),r.jsx("h3",{className:"font-bold text-slate-800",children:"Ticketing"}),r.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Issue tickets and manage bookings."})]}),(0,r.jsxs)("div",{className:"bg-white p-6 rounded-xl border border-slate-200 hover:border-blue-400 hover:shadow-md transition cursor-pointer group",children:[r.jsx("div",{className:"h-12 w-12 bg-purple-50 rounded-lg flex items-center justify-center mb-4 group-hover:bg-purple-100",children:r.jsx("span",{className:"text-2xl",children:"\uD83D\uDEC2"})}),r.jsx("h3",{className:"font-bold text-slate-800",children:"Visas & Passports"}),r.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Manage Nadra and Passport applications."})]}),h&&r.jsx(o(),{href:"/dashboard/settings",className:"block",children:(0,r.jsxs)("div",{className:"bg-slate-800 p-6 rounded-xl border border-slate-700 hover:bg-slate-700 hover:shadow-md transition cursor-pointer group h-full",children:[r.jsx("div",{className:"h-12 w-12 bg-slate-700 rounded-lg flex items-center justify-center mb-4 group-hover:bg-slate-600",children:r.jsx("span",{className:"text-2xl",children:"⚙️"})}),r.jsx("h3",{className:"font-bold text-white",children:"Admin Settings"}),r.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"Manage branches, staff, and roles."})]})})]})]})]})})}},1506:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>l,metadata:()=>a});var r=t(9510);t(7272);let a={title:"Piyam Travels IMS",description:"Employee Information Management System"};function l({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{children:e})})}},1812:(e,s,t)=>{"use strict";let{createProxy:r}=t(8570);e.exports=r("/workspaces/pt-portal/node_modules/next/dist/client/link.js")},7272:()=>{}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[276,689,471,730,434,303],()=>t(5689));module.exports=r})();